-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp", "lib/Tunnel")
local Proxy = module("vrp", "lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONEX√ÉO
-----------------------------------------------------------------------------------------------------------------------------------------
cO = {}
Tunnel.bindInterface("clothes",cO)
vCLIENT = Tunnel.getInterface("clothes")

function getUserId(source)
    return vRP.getUserId(source)
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- BUY
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterServerEvent("clothes:buy")
AddEventHandler("clothes:buy", function(preco, dataParts)
    local user_id = getUserId(source)
    if user_id then 
        vCLIENT.finalizarCompra(source, true)
    end
end)
----------------------------------------------------------------------------------------------------------------------------------------
-- PERMISSION
-----------------------------------------------------------------------------------------------------------------------------------------
function cO.checkPermission(perm)
    return getUserId(source) and vRP.hasPermission(getUserId(source),perm)
end
----------------------------------------------------------------------------------------------------------------------------------------
-- INSTANCE
-----------------------------------------------------------------------------------------------------------------------------------------
function cO.setInstance(status)
    local user_id = getUserId(source)
    if user_id then 
        SetPlayerRoutingBucket(source, status and parseInt(user_id) or 0)
    end
end